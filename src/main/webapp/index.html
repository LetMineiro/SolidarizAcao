<!DOCTYPE html>
<html lang="pt-BR">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="style.css">
        <title>
            SolidarizAção
        </title>
    </head>
    <body>
        <!--navbar compartilhada-->
        <div id="navbar-container"></div>
            
        <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
            
        <!---CAIXA CEP DOAÇÃO---------------------------------------------------->
            
        <main>
            <div class="doacao-box">
                <h2>
                    FAÇA AGORA SUA DOAÇÃO
                </h2>
                <form id="cepForm">
                    <input type="text" id="cep" placeholder="00000-000" maxlength="9" required>
                    <button type="submit" class="botao-agendar">
                        Agendar
                    </button>
                </form>
                <div id="mensagem-erro" class="mensagem-erro" style="display:none;"></div>
                <br>
                <p>
                    Doe roupas, alimentos e outros objetos em bom estado.
                </p>
            </div>
        </main>
            
        <!----------------------------------------------------------------------->
            
        <!--BLOCOS--------------------------------------------------------------->
            
        <section class="secao">
            
            <!-- BLOCO 1 -->
            <div class="bloco" style="background-image: url('img/ChatGPT Image 20 de mai. de 2025, 14_34_59.png');">
                <div class="conteudo">
                    <div class="titulo">
                        LEVE SUA DOAÇÃO A UM<br>PONTO DE COLETA
                    </div>
                    <a href="coleta.html" class="botao">
                        VER LOCAIS
                    </a>
                </div>
            </div>
                
            <!-- BLOCO 2 -->
            <div class="bloco" style="background-image: url('img/fundo-social-de-solidariedade-de-aracatuba-inicia-recolhimento-das-caixas-da-campanha-do-agasalho.jpg');">
                <div class="conteudo">
                    <div class="titulo">
                        PROMOVA UMA CAMPANHA
                    </div>
                    <a href="campanha.html" class="botao">
                        PEÇA AGORA
                    </a>
                </div>
            </div>
        </section>
            
        <!----------------------------------------------------------------------->
            
        <!--FUNDO---------------------------------------------------------------->
            
        <div class="fundo"></div>
            
        <script src="script.js"></script>
            
        <!-- Carregamento da navbar compartilhada e ativação do comportamento do menu -->
        <script>
  fetch('nav.html')
    .then(response => response.text())
    .then(data => {
      document.getElementById('navbar-container').innerHTML = data;

      // Interação dos botões da navbar
      $(".sub-btn").click(function () {
        $(this).next(".sub-menu").slideToggle();
      });

      const menu = document.querySelector(".menu");
      const menuBtn = document.querySelector(".menu-btn");
      const closeBtn = document.querySelector(".close-btn");

      if (menuBtn && closeBtn && menu) {
        menuBtn.addEventListener("click", () => {
          menu.classList.add("active");
        });

        closeBtn.addEventListener("click", () => {
          menu.classList.remove("active");
        });
      }

      window.addEventListener("scroll", () => {
        const header = document.querySelector("header");
        if (header) {
          header.classList.toggle("sticky", window.scrollY > 0);
        }
      });

      // Substitui LOGIN pelo nome do usuário se estiver logado
      fetch("perfil")
        .then(res => res.ok ? res.json() : Promise.reject())
        .then(data => {
          const loginLink = document.getElementById("login-link");
          if (loginLink) {
            loginLink.textContent = `${data.nome.split(" ")[0].toUpperCase()}`;
            loginLink.href = "perfil.html";
          }
        })
        .catch(() => {
          const loginLink = document.getElementById("login-link");
          if (loginLink) {
            loginLink.textContent = "LOGIN";
            loginLink.href = "login.html";
          }
        });

    })
    .catch(err => console.error("Erro ao carregar navbar:", err));
</script>
        <script>
                // Substitui LOGIN pelo nome do usuário se estiver logado
                fetch("perfil")
                        .then(res => res.ok ? res.json() : Promise.reject())
                        .then(data => {
                            const loginLink = document.getElementById("login-link");
                    if (loginLink) {
                        loginLink.textContent = `${data.nome.split(" ")[0].toUpperCase()}`;
                        loginLink.href = "perfil.html";
                    }
                })
                        .catch(() => {
                            // Se não estiver logado, mantém o link para login.html
                    const loginLink = document.getElementById("login-link");
                    if (loginLink) {
                        loginLink.textContent = "LOGIN";
                        loginLink.href = "login.html";
                    }
                });
            });
        </script>   
    </body>
</html>